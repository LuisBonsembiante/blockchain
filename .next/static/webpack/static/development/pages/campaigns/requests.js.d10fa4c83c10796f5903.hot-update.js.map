{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests.js.d10fa4c83c10796f5903.hot-update.js","sources":["webpack:///./components/RequestRow.js"],"sourcesContent":["import React from 'react';\nimport {Table, Button} from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\n\nexport default class RequestRow extends React.Component {\n\n    state = {\n        errorMessage: '',\n        loading: false\n    }\n    onApprove = async () => {\n\n        this.setState({ loading: true });\n\n        const campaign = Campaign(this.props.address);\n\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.approveRequest(this.props.id).send({\n            from: accounts[0]\n        });\n\n        this.setState({ loading: false });\n    };\n\n    onFinalize = async () => {\n\n        this.setState({ loading: true });\n\n        const campaign = Campaign(this.props.address);\n\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.finalizeRequest(this.props.id).send({\n            from: accounts[0]\n        });\n\n        this.setState({ loading: false });\n    };\n\n    render() {\n        const {Row, Cell} = Table;\n        const {id, request, approversCount} = this.props;\n        const readyToFinalize = request.approvalCount > approversCount / 2;\n\n        return (\n            <Row\n                disabled={request.complete}\n                positive={readyToFinalize && !request.complete}\n            >\n\n                <Cell>{id}</Cell>\n                <Cell>{request.description}</Cell>\n                <Cell>{web3.utils.fromWei(request.value,'ether')}</Cell>\n                <Cell>{request.recipient}</Cell>\n                <Cell>\n                    {request.approvalCount}/{approversCount}\n                </Cell>\n                <Cell>\n                    {request.complete ? null : (\n                        <Button loading={this.state.loading} color=\"green\" basic onClick={this.onApprove}>\n                            Approve\n                        </Button>\n                    )}\n                </Cell>\n                <Cell>\n                    {request.complete ? null : (\n                        <Button loading={this.state.loading} color=\"teal\" basic onClick={this.onFinalize}>\n                            Finalize\n                        </Button>\n                    )}\n                </Cell>\n            </Row>\n        );\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AAJA;AAAA;AACA;AADA;AAMA;AANA;AAAA;AAQA;AADA;AACA;AARA;AAWA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AAJA;AAAA;AACA;AADA;AAMA;AANA;AAAA;AAQA;AADA;AACA;AARA;AAWA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAEA;AACA;AAFA;AAcA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AApEA;AACA;;;;;A","sourceRoot":""}